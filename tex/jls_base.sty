\ProvidesPackage{jls_base}

% --------------------------------------------------------\
% imports

\usepackage[english]{babel}
\usepackage{microtype}
\usepackage{csquotes}
\usepackage{fontspec}
\usepackage{titlesec}
\usepackage{titling}
\usepackage[usenames, svgnames]{xcolor}
\usepackage{geometry}
\usepackage{framed}
\usepackage[colorlinks = true,
            hyperfootnotes=true,
            urlcolor = Red,
            citecolor = Red]{hyperref}
\usepackage{tabularx}
\usepackage{booktabs}
\usepackage{multicol}
\usepackage{enumitem}
\usepackage{fontawesome5}
\usepackage{endnotes}
\usepackage[font=footnotesize, labelfont=bf]{caption}
\usepackage[
	backend=biber,
	style=numeric,
	citestyle=numeric
]{biblatex}

\usepackage{subfiles}

% --------------------------------------------------------
% Layout

\geometry{
    top=1in,
    left=0.75in,
    right=0.75in
}

%% title spacing
\titlespacing*{\chapter}{0pt}{-10pt}{0pt}
\titlespacing{\section}{0pt}{5em}{0pt}

%% para spacing instead of indents
\setlength{\parindent}{0pt}
\setlength{\parskip}{0.5em}

%% no spacing in lists
\setlist{nosep, itemsep=0.5em}
% \setlist[1]{labelindent=1em, itemsep=0.5em}
% \setenum{nosep, itemsep=0.5em}


%% Two column  layout
\setlength{\columnsep}{1.5em}
% \setlength{\columnseprule}{0.1pt}

% right aligned tabularx
\newcolumntype{R}{>{\raggedleft\arraybackslash}X}

% remove "contents" from toc
\renewcommand{\contentsname}{}

% leftbar for blockquotes
\renewenvironment{leftbar}
{\def\FrameCommand{\hspace{0em}\vrule width 0.5pt \hspace{1em}}\MakeFramed {\advance\hsize-\width \FrameRestore}}
{\endMakeFramed}

\newenvironment{ideabox}
{\def\FrameCommand{\hspace{0em}\vrule width 0.5pt \hspace{1em}}\MakeFramed {\advance\hsize-\width \FrameRestore}}
{\endMakeFramed}


% --------------------------------------------------------
% Typography
\newfontface\titlefont{Marian 1554}
\newfontface\graphik{Graphik Light}[
   BoldFont = Graphik Bold,
   ItalicFont = Graphik Light Italic
]
% \newfontface\minion{Minion Pro Regular}[
%     BoldFont = Minion Pro Bold,
%     ItalicFont = Minion Pro Italic,
%     BoldItalicFont = Minion Pro Bold Italic
% ]

\setmainfont{Minion Pro}

% restyle captions
% \setcaptionfont{\footnotesize\raggedright}
% \setsidenotefont{\footnotesize}
% \setmarginnotefont{\footnotesize}
\captionsetup{justification=raggedright, singlelinecheck=false}
\setlength{\abovecaptionskip}{3pt plus 2pt minus 3pt}

%% restyle sectino headers
\titleformat{\section}{\normalfont\Huge\bfseries}{\thesection.}{1em}{}
\titleformat{\subsection}{\normalfont\large\bfseries}{\thesubsection}{1em}{}
% \let\clearpage\relax

% Restyle Title
\pretitle{\noindent\fontsize{48pt}{48pt}\titlefont}
\posttitle{\hfill}
\preauthor{\vspace{1em}\break\noindent}
\postauthor{\hfill\break}
\predate{\noindent}
\postdate{\hfill}

% \makeatletter
% \renewcommand{\maketitle}{\bgroup
%     \noindent\fontsize{48pt}{48pt}\titlefont\@title\hfill\\
%     \vspace{-0pt}\\
%     \normalsize\graphik\appname\hfill\break
%     \normalsize\graphik\textbf{\@author}\hfill\break
%     % {\fontsize{1pt}{1pt}\noindent\makebox[\linewidth]{\rule{\textwidth}{1pt}}}
%     \vspace{12pt}\normalfont
% }
% \makeatother

% format smart quotes
\MakeOuterQuote{"}

% 'draft' command to visually distinguish placehodler text
\newcommand{\draft}[1]{\textcolor{gray}{\textit{#1}}}

% 'todo' command to mark notes to self
\newcommand{\todo}[1]{\textcolor{red}{#1}}

% idea command to indicated a proposed idea
\newcommand{\idea}[1]{\begin{ideabox}\faLightbulb[regular] - #1\end{ideabox}}

% --------------------------------------------------------
% Bibliography

% Print bibliography at end of each subfile when compiling separately,
% but also in main document when compiling together
\AtEndDocument{%
    % \newpage
    % \section{Notes}
    % \theendnotes
    \newpage
    \section{References}
    \printbibliography
}